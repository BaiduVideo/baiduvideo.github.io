---
layout: page
title: 递归销毁对象
tagline: Supporting tagline
---
{% include JB/setup %}

##防止递归引用的销毁对象
    function destroy(obj){ 
        "use strict";//严格模式
        var ary = ['[object Array]', "[object Object]"];
        destroy.runed || (destroy.runed = []);
        if(destroy.runed.indexOf(obj)>=0) return;
        destroy.runed.push(obj);
        for(var i in obj){
            if(Object.prototype.toString.call(obj[i]) in ary) destory(obj[i])
            else obj[i].destroy && obj[i].destroy(), delete obj[i];
        };
        delete destroy.runed;
    };
    var a = {name:'conan', age:24}; a.my = a;
    destroy(a);




